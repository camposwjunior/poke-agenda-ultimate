<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokÃ©agenda Ultimate - 9 GeraÃ§Ãµes</title>
    <style>
        :root {
            --bg-body: #f0f2f5; --bg-card: #ffffff; --text-main: #333;
            --text-sub: #666; --bg-detalhes: rgba(255, 255, 255, 0.85); --btn-choro: #333;
        }

        .dark-mode {
            --bg-body: #121212; --bg-card: #1e1e1e; --text-main: #f0f0f0;
            --text-sub: #bbb; --bg-detalhes: rgba(40, 40, 40, 0.7); --btn-choro: #555;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; 
            background: var(--bg-body); color: var(--text-main); padding: 20px; transition: all 0.3s ease; 
        }

        .btn-theme { position: absolute; top: 20px; right: 20px; cursor: pointer; font-size: 24px; background: none; border: none; }
        .logo-pokemon { width: 100%; max-width: 250px; margin-bottom: 20px; }
        
        .busca-container { margin-bottom: 15px; display: flex; gap: 10px; }
        input { padding: 12px 20px; border-radius: 25px; border: 2px solid #ccc; width: 220px; outline: none; background: var(--bg-card); color: var(--text-main); }
        button#btnBuscar { padding: 12px 25px; cursor: pointer; background: #e3350d; color: white; border: none; border-radius: 25px; font-weight: bold; }

        /* BARRA DE FILTROS CENTRALIZADA E SEM SCROLL */
        .filtros-wrapper { 
            display: flex; 
            flex-wrap: wrap; /* Permite quebrar linha */
            justify-content: center; /* Centraliza os botÃµes, inclusive os da segunda linha */
            gap: 10px; 
            width: 100%; 
            max-width: 800px; 
            margin-bottom: 25px; 
        }
        
        .btn-filtro { 
            padding: 10px 15px; border-radius: 20px; border: 1px solid #ccc;
            background: var(--bg-card); color: var(--text-main); cursor: pointer; font-size: 0.85em; 
            font-weight: bold; transition: 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-width: 120px; /* Garante um tamanho uniforme */
        }
        .btn-filtro:hover { background: #e3350d; color: white; border-color: #e3350d; transform: translateY(-2px); }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .navegacao-wrapper { display: flex; align-items: center; justify-content: center; gap: 15px; width: 100%; max-width: 900px; }
        .card { 
            background: var(--bg-card); border-radius: 25px; padding: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.3); 
            text-align: center; width: 420px; animation: slideUp 0.6s ease-out; position: relative;
        }

        .img-container { position: relative; }
        img.pkm-img { width: 180px; height: 180px; filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2)); }

        .btn-shiny {
            position: absolute; bottom: 0; right: 40px; background: #ffe066; border: none; 
            border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .detalhes { background: var(--bg-detalhes); border-radius: 20px; padding: 20px; text-align: left; margin-top: 10px; }
        .badge-container { display: flex; flex-wrap: wrap; gap: 5px; margin: 5px 0; }
        .badge { padding: 4px 10px; border-radius: 8px; font-size: 0.75em; color: white; font-weight: bold; text-transform: uppercase; }

        .stats-container { margin-top: 15px; border-top: 1px solid #44444433; padding-top: 10px; }
        .stat-row { display: flex; align-items: center; margin-bottom: 4px; font-size: 0.7em; font-weight: bold; }
        .stat-label { width: 75px; color: var(--text-sub); }
        .stat-bar-bg { flex-grow: 1; background: #ddd; height: 6px; border-radius: 3px; overflow: hidden; margin: 0 10px; }
        .stat-bar-fill { height: 100%; transition: width 1s ease-in-out; }

        .btn-nav { background: #333; color: white; border: none; border-radius: 50%; width: 45px; height: 45px; cursor: pointer; transition: 0.2s; }
        .btn-nav:hover { background: #e3350d; }
        .btn-choro { background: var(--btn-choro); color: white; border: none; border-radius: 12px; padding: 10px; width: 100%; cursor: pointer; font-weight: bold; margin: 10px 0; }
        .descricao { font-size: 1.05em; line-height: 1.5; font-style: italic; margin-top: 15px; color: var(--text-main); }
    </style>
</head>
<body>

    <button class="btn-theme" onclick="toggleTheme()">ðŸŒ“</button>
    <img src="https://upload.wikimedia.org/wikipedia/commons/9/98/International_PokÃ©mon_logo.svg" id="logoIntro" class="logo-pokemon">

    <div class="busca-container">
        <input type="text" id="pokemonInput" placeholder="Nome ou nÃºmero">
        <button id="btnBuscar" onclick="buscar()">Buscar</button>
    </div>

    <div class="filtros-wrapper">
        <button class="btn-filtro" onclick="filtrar(1)">1Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(152)">2Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(252)">3Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(387)">4Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(494)">5Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(650)">6Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(722)">7Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(810)">8Âª GeraÃ§Ã£o</button>
        <button class="btn-filtro" onclick="filtrar(906)">9Âª GeraÃ§Ã£o</button>
    </div>

    <div class="navegacao-wrapper" id="areaResultado" style="display: none;">
        <button class="btn-nav" onclick="navegar(-1)"> < </button>
        <div id="resultado" class="card">
            <h2 id="pkmNome" style="margin-top:0"></h2>
            <div class="img-container">
                <img id="pkmImagem" class="pkm-img">
                <button class="btn-shiny" onclick="toggleShiny()" title="Alternar Shiny">âœ¨</button>
            </div>
            <div class="detalhes">
                <p><strong>Tipo:</strong> <span id="pkmTipo"></span></p>
                <p><strong>Forte contra:</strong></p>
                <div id="containerForte" class="badge-container"></div>
                <p><strong>Fraco contra:</strong></p>
                <div id="containerFraco" class="badge-container"></div>
                <button class="btn-choro" id="botaoAudio">ðŸ”Š OUVIR CHORO</button>
                <div class="stats-container" id="statsContainer"></div>
                <p class="descricao" id="pkmDescricao"></p>
            </div>
        </div>
        <button class="btn-nav" onclick="navegar(1)"> > </button>
    </div>

    <script>
        const traduzirTipo = {
            fire: "Fogo", water: "Ãgua", grass: "Planta", bug: "Inseto", normal: "Normal", poison: "Venenoso", 
            electric: "ElÃ©trico", ground: "Terra", fairy: "Fada", fighting: "Lutador", psychic: "PsÃ­quico", 
            rock: "Pedra", ghost: "Fantasma", ice: "Gelo", dragon: "DragÃ£o", steel: "AÃ§o", flying: "Voador", dark: "Sombrio"
        };

        const coresTipos = {
            grass: "#78C850", fire: "#FF4422", water: "#6890F0", bug: "#A8B820", normal: "#A8A878", 
            poison: "#A040A0", electric: "#F8D030", ground: "#B19149", fairy: "#EE99AC", fighting: "#C03028", 
            psychic: "#F85888", rock: "#B8A038", ghost: "#705898", ice: "#98D8D8", dragon: "#7038F8", 
            steel: "#B8B8D0", flying: "#A890F0", dark: "#705848"
        };

        let idAtual = 0, imgNormal = "", imgShiny = "", mostrandoShiny = false;

        function toggleTheme() { document.body.classList.toggle('dark-mode'); }
        function toggleShiny() {
            mostrandoShiny = !mostrandoShiny;
            document.getElementById('pkmImagem').src = mostrandoShiny ? imgShiny : imgNormal;
        }

        function filtrar(valor) {
            document.getElementById('pokemonInput').value = valor;
            buscar();
        }

        function navegar(dir) {
            const novoId = idAtual + dir;
            if (novoId > 0) { filtrar(novoId); }
        }

        async function buscar() {
            const btn = document.getElementById('btnBuscar');
            const valor = document.getElementById('pokemonInput').value.toLowerCase().trim();
            if (!valor) return;
            btn.innerText = "..."; btn.disabled = true;

            try {
                const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${valor}`);
                const dados = await res.json();
                idAtual = dados.id;
                mostrandoShiny = false;

                imgNormal = dados.sprites.other['official-artwork'].front_default;
                imgShiny = dados.sprites.other['official-artwork'].front_shiny || imgNormal;

                let fortes = new Set(), fracos = new Set();
                for (const t of dados.types) {
                    const resT = await fetch(t.type.url);
                    const d = await resT.json();
                    d.damage_relations.double_damage_to.forEach(i => fortes.add(i.name));
                    d.damage_relations.double_damage_from.forEach(i => fracos.add(i.name));
                }

                const renderBadges = (set, id) => {
                    const c = document.getElementById(id); c.innerHTML = '';
                    set.forEach(t => {
                        const s = document.createElement('span'); s.className = 'badge';
                        s.innerText = traduzirTipo[t] || t; s.style.backgroundColor = coresTipos[t] || '#999';
                        c.appendChild(s);
                    });
                };
                renderBadges(fortes, 'containerForte'); renderBadges(fracos, 'containerFraco');

                const resS = await fetch(dados.species.url);
                const dS = await resS.json();
                let txt = dS.flavor_text_entries.find(e => e.language.name === 'en').flavor_text;
                txt = txt.replace(/[\f\n\r]/g, ' ').replace(/-\s/g, '').replace(/\s+/g, ' ');
                const resTr = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(txt)}&langpair=en|pt-br`);
                const dTr = await resTr.json();

                document.getElementById('logoIntro').style.display = 'none';
                const area = document.getElementById('areaResultado');
                area.style.display = 'none';
                setTimeout(() => { area.style.display = 'flex'; }, 10);

                document.getElementById('pkmNome').innerText = `#${dados.id} - ${dados.name.toUpperCase()}`;
                document.getElementById('pkmImagem').src = imgNormal;
                document.getElementById('pkmTipo').innerText = dados.types.map(t => traduzirTipo[t.type.name] || t.type.name).join(' / ');
                document.getElementById('pkmDescricao').innerText = dTr.responseData.translatedText;

                const statsC = document.getElementById('statsContainer'); statsC.innerHTML = '';
                dados.stats.forEach(s => {
                    const v = s.base_stat;
                    const c = v > 100 ? '#2ecc71' : (v > 60 ? '#f1c40f' : '#e74c3c');
                    statsC.innerHTML += `<div class="stat-row"><span class="stat-label">${s.stat.name.toUpperCase().replace('SPECIAL-', 'S.')}</span><div class="stat-bar-bg"><div class="stat-bar-fill" style="width: ${(v/255)*100}%; background: ${c}"></div></div><span>${v}</span></div>`;
                });

                document.getElementById('botaoAudio').onclick = () => { new Audio(dados.cries.latest).play(); };
                const corOriginal = coresTipos[dados.types[0].type.name] || "#ccc";
                document.getElementById('resultado').style.backgroundColor = document.body.classList.contains('dark-mode') ? corOriginal + "44" : corOriginal + "22";

            } catch (e) { alert("PokÃ©mon nÃ£o encontrado!"); }
            finally { btn.innerText = "Buscar"; btn.disabled = false; }
        }
    </script>
</body>

</html> 
